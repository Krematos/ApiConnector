server:
  port: 8080

external:
  api:
    base-url: http://localhost:9090 # Skutečná URL externího API

connector:
  retry:
    max-attempts: 3 # Maximální počet pokusů (1 originál + 2 opakování)
    delay-ms: 1500 # Prodleva mezi pokusy v ms

  # Tento klíč bude Middleware vyžadovat v hlavičce X-API-KEY
security:
  api-key: "moje-tajne-heslo-12345"

# Pokud chcete vidět detaily o tom, jak security filtry pracují:
logging:
  level:
    org.springframework.security: DEBUG

spring:
  main:
    allow-bean-definition-overriding: true
  application:
    name: krematos-middleware

management:
  endpoints:
    web:
      exposure:
        include: health, info, prometheus # Povolí tyto endpointy
  endpoint:
    health:
      show-details: always # Ukáže detailní info o zdraví (např. jestli běží DB a Rabbit)
  metrics:
    tags:
      application: ${spring.application.name} # Přidá štítek s názvem aplikace ke všem metrikám
    distribution:
      percentiles-histogram:
        http:
          server:
            requests: true # Povolí histogramy pro latenci (důležité pro grafy)

